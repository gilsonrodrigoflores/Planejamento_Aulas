<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cronograma de Aulas</title>
<meta name="theme-color" content="#059669">
<style>
  :root{
    --g1:#047857; --g2:#059669;
    --txt:#0f172a; --muted:#475569; --white:#ffffff;
  }
  html,body{height:100%;}
  body{
    margin:0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif;
    background: linear-gradient(180deg, var(--g1), var(--g2));
    color: var(--txt);
  }
  header{
    position: sticky; top:0; z-index:10;
    background: linear-gradient(180deg, #065f46, #047857);
    color: var(--white);
    box-shadow: 0 2px 10px rgba(0,0,0,.2);
  }
  .container{max-width:720px; margin:0 auto; padding:16px;}
  h1{margin:0; font-size:22px; font-weight:600;}
  nav{margin-top:12px; display:flex; gap:8px;}
  .tab{background:rgba(255,255,255,.12); color:#fff; border:none; padding:8px 12px; border-radius:999px; cursor:pointer;}
  .tab.active{background:rgba(255,255,255,.25); font-weight:600;}
  main{padding:24px 16px 48px; max-width:720px; margin:0 auto;}
  .chips{display:flex; gap:8px; overflow-x:auto; padding-bottom:8px; scrollbar-width:none; align-items:center; flex-wrap:nowrap;}
  .chips::-webkit-scrollbar{display:none;}
  .chip{white-space:nowrap; background:rgba(255,255,255,.2); color:#fff; padding:8px 12px; border-radius:999px; border:none; cursor:pointer;}
  .chip.primary{background:#fff; color:#065f46; font-weight:600;}
  .date-input{
    background:#ffffff; color:#0f172a; border:1px solid #e2e8f0; border-radius:10px;
    padding:8px 10px; font-size:14px;
  }
  .card{
    background:#fff; border-radius:14px; box-shadow: 0 6px 18px rgba(0,0,0,.08);
    padding:16px; display:flex; flex-direction:column; gap:10px;
  }
  .row{display:flex; align-items:center; justify-content:space-between; gap:8px;}
  .meta{color:var(--muted); font-size:13px;}
  .badge{display:inline-flex; align-items:center; gap:6px; font-size:12px; border-radius:999px; padding:4px 8px;}
  .badge.aux{background:#d1fae5; color:#065f46;}
  .btn{
    border:none; border-radius:10px; padding:10px 12px; cursor:pointer;
    background:#059669; color:#fff; font-weight:600;
  }
  .btn:hover{background:#047857;}
  .btn.light{background:rgba(255,255,255,.2); color:#fff; font-weight:500;}
  .btn.light:hover{background:rgba(255,255,255,.3);}
  .btn.outline{background:#fff; color:#0f172a; border:1px solid #e2e8f0;}
  .box{background:rgba(255,255,255,.2); color:#fff; border-radius:12px; padding:10px 12px;}
  .day-block{background:rgba(255,255,255,.18); border-radius:12px; padding:10px;}
  .day-title{color:#fff; font-weight:600; margin:4px 0 8px;}
  .obs{background:#ecfdf5; border:1px solid #a7f3d0; border-radius:10px; padding:8px; display:flex; justify-content:space-between; gap:8px;}
  .obs .txt{font-size:13px; color:#065f46;}
  .btn.link{background:none; color:#065f46; border:none; padding:0; font-size:12px; text-decoration:underline; cursor:pointer;}
  .muted{color:#e5e7eb;}
  dialog{border:none; border-radius:14px; padding:0; width:min(96vw,560px);}
  dialog::backdrop{background:rgba(0,0,0,.45);}
  .dlg-header{background:#059669; color:#fff; padding:12px 16px; font-weight:600;}
  .dlg-body{padding:14px 16px;}
  .dlg-foot{padding:12px 16px; display:flex; justify-content:flex-end; gap:8px;}
  textarea, input, select{
    width:100%; box-sizing:border-box; border:1px solid #e2e8f0; border-radius:10px; padding:10px; font-size:14px;
  }
  label{font-size:13px; color:#e7fff3; font-weight:600; display:block;}
  .empty{color:#fff; opacity:.95;}
  .slot-pill{
    display:inline-flex; font-size:12px; font-weight:700;
    background:#e2e8f0; color:#0f172a; border-radius:999px; padding:4px 8px;
  }
  .loading{
    color:#fff; opacity:.95; padding:8px 0;
  }
</style>
</head>
<body>
<header>
  <div class="container">
    <h1>Cronograma de Aulas</h1>
    <nav>
      <button id="tabHoje" class="tab active">Aulas de hoje</button>
      <button id="tabPlano" class="tab">Planejamento da semana</button>
    </nav>
  </div>
</header>

<main>
  <!-- Aulas de Hoje -->
  <section id="viewHoje">
    <div class="chips" id="chipsDias">
      <button class="chip" data-dia="ontem">Ontem</button>
      <button class="chip primary" data-dia="hoje">Hoje</button>
      <button class="chip" data-dia="amanha">Amanhã</button>

      <div style="display:flex; align-items:center; gap:8px; margin-left:8px;">
        <label for="inputData" class="meta">Selecionar dia:</label>
        <input id="inputData" type="date" class="date-input">
      </div>
    </div>
    <div id="statusHoje" class="loading" style="display:none;">Carregando…</div>
    <div id="listaAulas" style="display:flex; flex-direction:column; gap:16px;"></div>
  </section>

  <!-- Planejamento da Semana -->
  <section id="viewPlano" style="display:none;">
    <div class="row">
      <button id="btnPrev" class="btn light">◀︎</button>
      <div id="lblSemana" class="box">Semana do dia --/--/----</div>
      <button id="btnNext" class="btn light">▶︎</button>
    </div>
    <div id="statusPlano" class="loading" style="display:none;">Carregando…</div>
    <div id="gridPlano" style="margin-top:12px; display:flex; flex-direction:column; gap:12px;"></div>
  </section>
</main>

<!-- Dialog: Registrar Ocorrência -->
<dialog id="dlgOcorrencia">
  <div class="dlg-header">Registrar o que aconteceu</div>
  <div class="dlg-body">
    <div id="infoAula" class="meta" style="margin-bottom:8px;"></div>
    <label for="txtOcorrencia" style="color:#334155;">Observação</label>
    <textarea id="txtOcorrencia" rows="6" placeholder="Descreva o ocorrido..." required></textarea>
  </div>
  <div class="dlg-foot">
    <button class="btn outline" onclick="document.getElementById('dlgOcorrencia').close()">Cancelar</button>
    <button id="btnSalvarOcorrencia" class="btn">Salvar</button>
  </div>
</dialog>

<!-- Dialog: Planejar Aula (criar/editar) -->
<dialog id="dlgPlano">
  <div class="dlg-header" id="dlgPlanoTitle">Planejar aula</div>
  <div class="dlg-body" style="display:grid; gap:12px;">
    <input type="hidden" id="pl_id">

    <div>
      <label>Semana (2ª feira)</label>
      <input id="semana_inicio" type="date" required>
    </div>

    <div>
      <label>Dia da semana</label>
      <select id="dia_semana" required>
        <option value="1">Segunda</option>
        <option value="2">Terça</option>
        <option value="3">Quarta</option>
        <option value="4">Quinta</option>
        <option value="5">Sexta</option>
      </select>
    </div>

    <div>
      <label>Aula padrão (6 aulas/dia)</label>
      <select id="slot_padrao">
        <option value="">(não usar)</option>
        <option value="1">1ª aula (07:15–08:30)</option>
        <option value="2">2ª aula (08:30–09:15)</option>
        <option value="3">3ª aula (09:15–10:00)</option>
        <option value="4">4ª aula (10:00–10:45)</option>
        <option value="5">5ª aula (10:45–11:30)</option>
        <option value="6">6ª aula (11:30–12:15)</option>
      </select>
    </div>

    <div>
      <label>Turma ID</label>
      <input id="turma_id" placeholder="Ex.: T1A" required>
    </div>

    <div>
      <label>Sala ID</label>
      <input id="sala_id" placeholder="Ex.: S101">
    </div>

    <div class="row" style="gap:10px;">
      <div style="flex:1">
        <label>Início</label>
        <input id="inicio" type="time" required>
      </div>
      <div style="flex:1">
        <label>Fim</label>
        <input id="fim" type="time" required>
      </div>
    </div>

    <div>
      <label>Descrição planejada</label>
      <textarea id="descricao_planejada" rows="4" placeholder="Conteúdo/atividade planejada..."></textarea>
    </div>
  </div>

  <div class="dlg-foot">
    <button class="btn outline" onclick="document.getElementById('dlgPlano').close()">Cancelar</button>
    <button id="btnSalvarPlano" class="btn">Salvar</button>
  </div>
</dialog>

<script>
/*** CONFIG: COLE A URL DO SEU WEB APP AQUI ***/
const API_URL = 'https://script.google.com/macros/s/AKfycbwY4tYepuc9jVhJS4iIVs7M2-4z2d637dJNh9Y-XfyMfpocDt4x7UQb_Q4jM8LYkOizyA/exec';

/*** Slots padrão (12 aulas/dia) ***/
const TIME_SLOTS = [
  {n:1, inicio:'07:15', fim:'08:30'},
  {n:2, inicio:'08:30', fim:'09:15'},
  {n:3, inicio:'09:15', fim:'10:00'},
  {n:4, inicio:'10:00', fim:'10:45'},
  {n:5, inicio:'10:45', fim:'11:30'},
  {n:6, inicio:'11:30', fim:'12:15'}
  {n:7, inicio:'13:15', fim:'14:00'}
  {n:8, inicio:'14:00', fim:'14:45'}
  {n:6, inicio:'14:45', fim:'15:30'}
  {n:6, inicio:'15:30', fim:'16:15'}
  {n:6, inicio:'16:15', fim:'17:00'}
  {n:6, inicio:'17:00', fim:'17:45'}
];

function parseYMDLocal(ymd){
  if(!ymd) return null;
  const [y,m,d] = String(ymd).split('-').map(Number);
  if(!y || !m || !d) return null;
  const dt = new Date(y, m-1, d);
  dt.setHours(0,0,0,0);
  return dt;
}

const toYMD = (d)=>{
  const z=new Date(d); z.setHours(0,0,0,0);
  const m=String(z.getMonth()+1).padStart(2,'0');
  const day=String(z.getDate()).padStart(2,'0');
  return `${z.getFullYear()}-${m}-${day}`;
};

const mondayOf = (d)=>{
  const z=new Date(d);
  const dow=z.getDay();
  const diff=(dow===0?-6:1-dow);
  z.setDate(z.getDate()+diff);
  z.setHours(0,0,0,0);
  return z;
};

const fmtBR = (ymd)=>{
  if(!ymd) return '--/--/----';
  const [y,m,d]=ymd.split('-');
  return `${d}/${m}/${y}`;
};

const diaLabel = (n)=>['','Segunda','Terça','Quarta','Quinta','Sexta'][Number(n)||0];

/*** API ***/
const api = {
  async getAulas(dataYMD){
    const r = await fetch(`${API_URL}?action=aulasHoje&data=${encodeURIComponent(dataYMD)}`);
    return r.json();
  },
  async getObservacoes(dataYMD){
    const r = await fetch(`${API_URL}?action=observacoes&data=${encodeURIComponent(dataYMD)}`);
    return r.json();
  },
  async postForm(params){
    const r = await fetch(API_URL, { method:'POST', body: new URLSearchParams(params) });
    return r.json();
  },
  async getPlanejamento(semanaYMD){
    const r = await fetch(`${API_URL}?action=planejamento&semana=${encodeURIComponent(semanaYMD)}`);
    return r.json();
  },
  registrarOcorrencia(payload){
    return this.postForm({action:'registrarOcorrencia', ...payload});
  },
  consumirObservacao(obs_id){
    return this.postForm({action:'consumirObservacao', obs_id});
  },
  upsertPlanejamento(obj){
    return this.postForm({action:'upsertPlanejamento', json: JSON.stringify(obj)});
  },
  deletarPlanejamento(pl_id){
    return this.postForm({action:'deletarPlanejamento', pl_id});
  }
};

/*** Estado ***/
let DATA_ATUAL = toYMD(new Date());
let SEMANA_ATUAL = toYMD(mondayOf(new Date()));
let AULAS = [];
let OBS = [];
let PLANO = [];

/*** Tabs ***/
const tabHoje = document.getElementById('tabHoje');
const tabPlano = document.getElementById('tabPlano');
const viewHoje = document.getElementById('viewHoje');
const viewPlano = document.getElementById('viewPlano');

function setTab(tab){
  if(tab==='hoje'){
    tabHoje.classList.add('active'); tabPlano.classList.remove('active');
    viewHoje.style.display = ''; viewPlano.style.display = 'none';
  }else{
    tabPlano.classList.add('active'); tabHoje.classList.remove('active');
    viewPlano.style.display = ''; viewHoje.style.display = 'none';
    renderPlanejamento();
  }
}
tabHoje.onclick = ()=>setTab('hoje');
tabPlano.onclick = ()=>setTab('plano');

/*** UI status ***/
function setStatus(id, show, text='Carregando…'){
  const el = document.getElementById(id);
  el.textContent = text;
  el.style.display = show ? '' : 'none';
}

/*** Aulas de hoje (otimizado com Promise.all) ***/
async function carregarAulas(){
  setStatus('statusHoje', true, 'Carregando…');
  try{
    const [resp, obs] = await Promise.all([
      api.getAulas(DATA_ATUAL),
      api.getObservacoes(DATA_ATUAL)
    ]);
    AULAS = resp.aulas || [];
    OBS   = obs.observacoes || [];
    renderAulas();
  } finally {
    setStatus('statusHoje', false);
  }
}

function renderAulas(){
  const wrap = document.getElementById('listaAulas');
  wrap.innerHTML = '';

  if(!AULAS.length){
    wrap.innerHTML = `<div class="empty">Sem aulas para ${fmtBR(DATA_ATUAL)}.</div>`;
    return;
  }

  // index de observações por turma (rápido)
  const obsByTurma = new Map();
  for(const o of OBS){
    const k = String(o.turma_id);
    if(!obsByTurma.has(k)) obsByTurma.set(k, []);
    obsByTurma.get(k).push(o);
  }

  AULAS.forEach((a,idx)=>{
    const pend = obsByTurma.get(String(a.turma_id)) || [];
    const pendHtml = pend.map(o=>`
      <div class="obs">
        <div class="txt">${o.texto}</div>
        <button class="btn link" data-consumir="${o.obs_id}">Marcar como visto</button>
      </div>`).join('');

    const card = document.createElement('article');
    card.className='card';
    card.innerHTML = `
      <div class="row">
        <div style="font-weight:600">${a.nome_turma}</div>
        <div class="meta">${a.inicio}–${a.fim}</div>
      </div>
      <div class="meta">Sala: <b>${a.sala_id||'-'}</b> • ${a.descricao_infra||'Sem infra'}</div>
      ${a.auxiliar_inclusao ? `<span class="badge aux">Auxiliar: ${a.auxiliar_inclusao}</span>` : ''}
      <div class="meta" style="color:#334155; font-size:14px;">
        <div style="font-weight:600; margin-bottom:4px;">Planejado:</div>
        <div>${a.descricao_planejada || '—'}</div>
      </div>
      ${pendHtml}
      <div><button class="btn" data-ocorrencia="${idx}">Registrar o que aconteceu</button></div>
    `;
    wrap.appendChild(card);
  });

  // Registrar ocorrência
  document.querySelectorAll('[data-ocorrencia]').forEach(btn=>{
    btn.onclick = ()=>{
      const a = AULAS[Number(btn.dataset.ocorrencia)];
      document.getElementById('infoAula').textContent =
        `${a.nome_turma} • ${a.inicio}–${a.fim} • ${fmtBR(DATA_ATUAL)}`;
      document.getElementById('txtOcorrencia').value = '';
      document.getElementById('dlgOcorrencia').showModal();

      document.getElementById('btnSalvarOcorrencia').onclick = async ()=>{
        const texto = document.getElementById('txtOcorrencia').value.trim();
        if(!texto) return;
        await api.registrarOcorrencia({ turma_id: a.turma_id, data_aula: DATA_ATUAL, texto });
        document.getElementById('dlgOcorrencia').close();
        await carregarAulas();
      };
    };
  });

  // Consumir observação
  document.querySelectorAll('[data-consumir]').forEach(btn=>{
    btn.onclick = async ()=>{
      await api.consumirObservacao(btn.dataset.consumir);
      await carregarAulas();
    };
  });
}

/*** Chips: apenas Ontem/Hoje/Amanhã (removidos Seg..Sex) ***/
document.querySelectorAll('[data-dia]').forEach(ch=>{
  ch.onclick = async ()=>{
    const v = ch.dataset.dia;
    let target = new Date();
    if(v==='ontem') target.setDate(target.getDate()-1);
    else if(v==='amanha') target.setDate(target.getDate()+1);
    DATA_ATUAL = toYMD(target);

    document.querySelectorAll('.chip').forEach(c=>c.classList.remove('primary'));
    ch.classList.add('primary');

    document.getElementById('inputData').value = DATA_ATUAL;
    await carregarAulas();
  };
});

// Selecionar data específica
const inputData = document.getElementById('inputData');
inputData.value = DATA_ATUAL;
inputData.addEventListener('change', async ()=>{
  const v = inputData.value;
  if(!v) return;
  DATA_ATUAL = v;

  document.querySelectorAll('.chip').forEach(c=>c.classList.remove('primary'));
  const hoje = toYMD(new Date());
  if(v === hoje){
    document.querySelector('.chip[data-dia="hoje"]')?.classList.add('primary');
  }
  await carregarAulas();
});

/*** Planejamento - navegação de semanas ***/
const lblSemana = document.getElementById('lblSemana');

document.getElementById('btnPrev').onclick = ()=>{
  const base = parseYMDLocal(SEMANA_ATUAL) || new Date();
  base.setDate(base.getDate()-7);
  SEMANA_ATUAL = toYMD(mondayOf(base));
  renderPlanejamento();
};

document.getElementById('btnNext').onclick = ()=>{
  const base = parseYMDLocal(SEMANA_ATUAL) || new Date();
  base.setDate(base.getDate()+7);
  SEMANA_ATUAL = toYMD(mondayOf(base));
  renderPlanejamento();
};

async function renderPlanejamento(){
  setStatus('statusPlano', true, 'Carregando…');
  try{
    const base = parseYMDLocal(SEMANA_ATUAL) || new Date();
    SEMANA_ATUAL = toYMD(mondayOf(base));
    lblSemana.textContent = `Semana do dia ${fmtBR(SEMANA_ATUAL)}`;

    const resp = await api.getPlanejamento(SEMANA_ATUAL);
    PLANO = resp.aulas || [];

    // Mapa rápido para encontrar (dia|inicio|fim) => aula
    const planMap = new Map();
    for(const a of PLANO){
      const key = `${Number(a.dia_semana)}|${String(a.inicio)}|${String(a.fim)}`;
      planMap.set(key, a);
    }

    const grid = document.getElementById('gridPlano');
    grid.innerHTML = '';

    for(let d=1; d<=5; d++){
      const bloco = document.createElement('div');
      bloco.className = 'day-block';

      const header = document.createElement('div');
      header.className = 'row';
      header.innerHTML = `<div class="day-title">${diaLabel(d)}</div>`;
      bloco.appendChild(header);

      const list = document.createElement('div');
      list.style.display='flex';
      list.style.flexDirection='column';
      list.style.gap='10px';

      TIME_SLOTS.forEach(slot=>{
        const key = `${d}|${slot.inicio}|${slot.fim}`;
        const existente = planMap.get(key);

        if(!existente){
          const card = document.createElement('article');
          card.className = 'card';
          card.innerHTML = `
            <div class="row">
              <span class="slot-pill">${slot.n}ª aula • ${slot.inicio}–${slot.fim}</span>
              <span class="meta">Vazio</span>
            </div>
            <div class="row">
              <button class="btn" data-plan-slot="${d}|${slot.n}">Planejar este horário</button>
            </div>
          `;
          list.appendChild(card);
        } else {
          const card = document.createElement('article');
          card.className = 'card';
          card.innerHTML = `
            <div class="row">
              <span class="slot-pill">${slot.n}ª aula • ${existente.inicio}–${existente.fim}</span>
              <div class="meta"><b>${existente.turma_id}</b></div>
            </div>
            <div class="meta">Sala: ${existente.sala_id || '-'}</div>
            <div class="meta" style="color:#334155;">${existente.descricao_planejada || '—'}</div>
            <div class="row">
              <button class="btn outline" data-edit="${existente.pl_id}">Editar</button>
              <button class="btn" data-del="${existente.pl_id}" style="background:#ef4444">Excluir</button>
            </div>
          `;
          list.appendChild(card);
        }
      });

      bloco.appendChild(list);
      grid.appendChild(bloco);
    }

    // Planejar slot vazio
    document.querySelectorAll('[data-plan-slot]').forEach(btn=>{
      btn.onclick = ()=>{
        const [dia, n] = btn.dataset.planSlot.split('|').map(Number);
        const slot = TIME_SLOTS.find(s=>s.n===n);
        openPlanoDialog({
          pl_id:'',
          semana_inicio: SEMANA_ATUAL,
          dia_semana: String(dia),
          turma_id:'',
          sala_id:'',
          inicio: slot.inicio,
          fim: slot.fim,
          descricao_planejada: `${n}ª aula — `
        }, n);
      };
    });

    // Editar
    document.querySelectorAll('[data-edit]').forEach(btn=>{
      btn.onclick = ()=>{
        const a = PLANO.find(x=> String(x.pl_id)===String(btn.dataset.edit));
        if(a){
          const slotMatch = TIME_SLOTS.find(s=> s.inicio===String(a.inicio) && s.fim===String(a.fim));
          openPlanoDialog(a, slotMatch ? slotMatch.n : null);
        }
      };
    });

    // Excluir
    document.querySelectorAll('[data-del]').forEach(btn=>{
      btn.onclick = async ()=>{
        if(!confirm('Excluir este planejamento?')) return;
        await api.deletarPlanejamento(btn.dataset.del);
        await renderPlanejamento();
      };
    });

  } finally {
    setStatus('statusPlano', false);
  }
}

function openPlanoDialog(a, slotN=null){
  document.getElementById('dlgPlanoTitle').textContent = a.pl_id ? 'Editar aula' : 'Adicionar aula';

  document.getElementById('pl_id').value = a.pl_id || '';
  document.getElementById('semana_inicio').value = a.semana_inicio || SEMANA_ATUAL;
  document.getElementById('dia_semana').value = a.dia_semana || '1';
  document.getElementById('turma_id').value = a.turma_id || '';
  document.getElementById('sala_id').value = a.sala_id || '';
  document.getElementById('inicio').value = a.inicio || '';
  document.getElementById('fim').value = a.fim || '';
  document.getElementById('descricao_planejada').value = a.descricao_planejada || '';

  const slotSelect = document.getElementById('slot_padrao');
  slotSelect.value = slotN ? String(slotN) : '';

  slotSelect.onchange = ()=>{
    const n = Number(slotSelect.value);
    if(!n) return;
    const slot = TIME_SLOTS.find(s=>s.n===n);
    if(slot){
      document.getElementById('inicio').value = slot.inicio;
      document.getElementById('fim').value = slot.fim;
    }
  };

  document.getElementById('dlgPlano').showModal();

  document.getElementById('btnSalvarPlano').onclick = async ()=>{
    const pl_id = document.getElementById('pl_id').value || undefined;

    // força semana como segunda-feira
    const semanaInput = document.getElementById('semana_inicio').value;
    const dt = parseYMDLocal(semanaInput);
    if(!dt){ alert('Data da semana inválida.'); return; }
    const monday = toYMD(mondayOf(dt));

    const payload = {
      pl_id,
      semana_inicio: monday,
      dia_semana: document.getElementById('dia_semana').value,
      turma_id: document.getElementById('turma_id').value.trim(),
      sala_id: document.getElementById('sala_id').value.trim(),
      inicio: document.getElementById('inicio').value,
      fim: document.getElementById('fim').value,
      descricao_planejada: document.getElementById('descricao_planejada').value.trim()
    };

    if(!payload.semana_inicio || !payload.dia_semana || !payload.turma_id || !payload.inicio || !payload.fim){
      alert('Preencha os campos obrigatórios.'); return;
    }

    await api.upsertPlanejamento(payload);
    document.getElementById('dlgPlano').close();
    await renderPlanejamento();

    // opcional: se você estiver olhando uma data da mesma semana, atualizar "Aulas de hoje"
    // (mantém tudo sincronizado e parece "instantâneo")
    await carregarAulas();
  };
}

/*** Inicialização ***/
setTab('hoje');
carregarAulas();
</script>
</body>
</html>
